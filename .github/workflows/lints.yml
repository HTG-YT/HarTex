name: Lints

on:
  pull_request:
    branches:
      - nightly

env:
  CARGO_TERM_COLOR: always

jobs:
  ClippyApiBackend:
    name: api-backend - Lint
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
      - name: Install latest nightly Rust toolchain
        uses: dtolnay/rust-toolchain@v1
        with:
          components: clippy, rustfmt
          toolchain: nightly
      - name: Download Buildsystem
        run: sudo wget https://github.com/TeamHarTex/HarTex/releases/download/buildsystem-2023-07-16/hartexbuild
      - name: Run Buildsystem
        run: sudo chmod +x ./hartexbuild && ./hartexbuild lint api-backend

  ClippyBuildsystem:
    name: buildsystem - Lint
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
      - name: Install latest nightly Rust toolchain
        uses: dtolnay/rust-toolchain@v1
        with:
          components: clippy, rustfmt
          toolchain: nightly
      - name: Download Buildsystem
        run: sudo wget https://github.com/TeamHarTex/HarTex/releases/download/buildsystem-2023-07-16/hartexbuild
      - name: Run Buildsystem
        run: sudo chmod +x ./hartexbuild && ./hartexbuild lint buildsystem

  ClippyDiscordFrontend:
    name: discord-frontend - Lint
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
      - name: Install latest nightly Rust toolchain
        uses: dtolnay/rust-toolchain@v1
        with:
          components: clippy, rustfmt
          toolchain: nightly
      - name: Download Buildsystem
        run: sudo wget https://github.com/TeamHarTex/HarTex/releases/download/buildsystem-2023-07-16/hartexbuild
      - name: Run Buildsystem
        run: sudo chmod +x ./hartexbuild && ./hartexbuild lint discord-frontend

  ClippyRustUtilities:
    name: rust-utilities - Lint
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
      - name: Install latest nightly Rust toolchain
        uses: dtolnay/rust-toolchain@v1
        with:
          components: clippy, rustfmt
          toolchain: nightly
      - name: Download Buildsystem
        run: sudo wget https://github.com/TeamHarTex/HarTex/releases/download/buildsystem-2023-07-16/hartexbuild
      - name: Run Buildsystem
        run: sudo chmod +x ./hartexbuild && ./hartexbuild lint rust-utilities

  ClippyLocalization:
    name: localization - Lint
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
      - name: Install latest nightly Rust toolchain
        uses: dtolnay/rust-toolchain@v1
        with:
          components: clippy, rustfmt
          toolchain: nightly
      - name: Download Buildsystem
        run: sudo wget https://github.com/TeamHarTex/HarTex/releases/download/buildsystem-2023-07-16/hartexbuild
      - name: Run Buildsystem
        run: sudo chmod +x ./hartexbuild && ./hartexbuild lint localization

  CodeSpellAll:
    name: CodeSpell
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
      - name: Run CodeSpell
        uses: codespell-project/actions-codespell@master
